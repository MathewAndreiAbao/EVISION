const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/C--5t8Yx.js","../chunks/BluUn2SV.js"])))=>i.map(i=>d[i]);
import{d as pt,b as Se,a as C,s as _,f as T}from"../chunks/BGsM1btW.js";import{p as kt,o as St,b as y,j as Ct,g as t,c as a,s as r,r as e,a as Tt,d as U,t as ie,f as we,e as Bt,$ as Mt,h as vt,n as Me,i as G}from"../chunks/DEPQPQt8.js";import{i as le}from"../chunks/CVvYbTkW.js";import{e as Ie,i as Ne}from"../chunks/DFPLsyL_.js";import{t as S,a as Fe,f as P}from"../chunks/tw1RdNRP.js";import{s as B,h as Vt,a as Ht,b as Qt,c as Wt}from"../chunks/BFGHZJqN.js";import{a as Gt,s as Zt}from"../chunks/DNJl1ib1.js";import{p as Jt}from"../chunks/CSn65FV0.js";import{S as Z,C as Xt}from"../chunks/BZZLp1oO.js";import{S as ut}from"../chunks/81uDzRXJ.js";import{_ as Kt}from"../chunks/PPVm8Dsz.js";import{b as yt}from"../chunks/REG38ZGk.js";import{g as Yt}from"../chunks/DHcjO8WO.js";import{P as ea,S as wt,r as ke}from"../chunks/BluUn2SV.js";import{normalizeComplianceStatus as ta,calculateCompliance as aa,groupSubmissionsByWeek as ra,getComplianceClass as oa}from"../chunks/DmYj-g2y.js";import{Z as sa}from"../chunks/D12q7Q36.js";import{b as ia,A as la,B as na}from"../chunks/DXadS_Hu.js";pt(["click"]);var da=T('<div class="absolute inset-0 flex items-center justify-center p-8 bg-black/60 backdrop-blur-sm text-center svelte-2164l3"><p class="text-white text-sm font-medium svelte-2164l3"> </p></div>'),ca=T(`<div class="fixed inset-0 z-[100] bg-black/90 flex flex-col items-center justify-center p-6 svelte-2164l3"><div class="relative w-full max-w-sm aspect-square rounded-3xl overflow-hidden border-2 border-white/20 shadow-2xl svelte-2164l3"><video class="w-full h-full object-cover svelte-2164l3"><track kind="captions" class="svelte-2164l3"/></video> <canvas class="hidden svelte-2164l3"></canvas> <div class="absolute inset-0 border-[40px] border-black/40 svelte-2164l3"></div> <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 border-2 border-gov-blue rounded-2xl svelte-2164l3"><div class="absolute top-0 left-0 w-full h-1 bg-gov-blue/50 shadow-[0_0_15px_rgba(0,103,172,0.8)] animate-scan svelte-2164l3"></div> <div class="absolute -top-1 -left-1 w-6 h-6 border-t-4 border-l-4 border-white rounded-tl-lg svelte-2164l3"></div> <div class="absolute -top-1 -right-1 w-6 h-6 border-t-4 border-r-4 border-white rounded-tr-lg svelte-2164l3"></div> <div class="absolute -bottom-1 -left-1 w-6 h-6 border-b-4 border-l-4 border-white rounded-bl-lg svelte-2164l3"></div> <div class="absolute -bottom-1 -right-1 w-6 h-6 border-b-4 border-r-4 border-white rounded-br-lg svelte-2164l3"></div></div> <!></div> <div class="mt-12 text-center space-y-2 svelte-2164l3"><h3 class="text-white font-bold text-lg svelte-2164l3">Scan QR Code</h3> <p class="text-gray-400 text-sm svelte-2164l3">Position the document's QR code within the frame</p></div> <button class="mt-16 py-3 px-8 rounded-full bg-white/10 border border-white/20 text-white text-xs font-black uppercase tracking-widest hover:bg-white/20 active:scale-95 transition-all cursor-pointer svelte-2164l3">CLOSE</button></div>`,2);function va(h,g){kt(g,!0);let l,u,f=U(!1),p=U(""),v=null;St(async()=>{try{y(f,!0),v=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),l.srcObject=v,l.setAttribute("playsinline","true"),l.play(),d()}catch{y(p,"Could not access camera. Please ensure permissions are granted."),y(f,!1)}}),Ct(()=>{o()});function o(){y(f,!1),v&&v.getTracks().forEach(x=>x.stop())}async function d(){if(!t(f))return;const x=(await Kt(async()=>{const{default:w}=await import("../chunks/C--5t8Yx.js").then(V=>V.j);return{default:w}},__vite__mapDeps([0,1]),import.meta.url)).default,L=async()=>{if(!(!t(f)||!l||!u)){if(l.readyState===l.HAVE_ENOUGH_DATA){const w=u,V=w.getContext("2d",{willReadFrequently:!0});if(!V)return;if(w.height=l.videoHeight,w.width=l.videoWidth,V.drawImage(l,0,0,w.width,w.height),"BarcodeDetector"in window)try{const de=await new BarcodeDetector({formats:["qr_code"]}).detect(l);if(de.length>0){g.onScan?.(de[0].rawValue),o(),g.onClose?.();return}}catch{}const ne=V.getImageData(0,0,w.width,w.height),ze=x(ne.data,ne.width,ne.height,{inversionAttempts:"dontInvert"});if(ze){g.onScan?.(ze.data),o(),g.onClose?.();return}}requestAnimationFrame(L)}};requestAnimationFrame(L)}var i=ca(),b=a(i),E=a(b);yt(E,x=>l=x,()=>l);var I=r(E,2);yt(I,x=>u=x,()=>u);var $=r(I,6);{var j=x=>{var L=da(),w=a(L),V=a(w,!0);e(w),e(L),ie(()=>_(V,t(p))),C(x,L)};le($,x=>{t(p)&&x(j)})}e(b);var J=r(b,4);e(i),Se("click",J,()=>{o(),g.onClose?.()}),S(3,i,()=>Fe),C(h,i),Tt()}pt(["click"]);async function At({action:h,entity_type:g,entity_id:l,details:u}){try{const{data:f}=await B.auth.getUser(),p=f.user;if(!p)return;const{data:v}=await B.from("audit_logs").select("current_hash").order("created_at",{ascending:!1}).limit(1).maybeSingle(),o=v?.current_hash||"0".repeat(64),d=new Date().toISOString(),i=JSON.stringify({user_id:p.id,action:h,entity_type:g||null,entity_id:l||null,details:u||null,prev_hash:o,timestamp:d}),b=new TextEncoder().encode(i),E=await crypto.subtle.digest("SHA-256",b),$=Array.from(new Uint8Array(E)).map(j=>j.toString(16).padStart(2,"0")).join("");await B.from("audit_logs").insert({user_id:p.id,action:h,entity_type:g,entity_id:l,details:u,prev_hash:o,current_hash:$})}catch(f){console.error("Failed to log action:",f)}}function ua(h,g){if(!h||h.length===0)return;const l=Object.keys(h[0]),f=[l.join(","),...h.map(d=>l.map(i=>{const b=d[i];return`"${b==null?"":String(b).replace(/"/g,'""')}"`}).join(","))].join(`
`),p=new Blob([f],{type:"text/csv;charset=utf-8;"}),v=URL.createObjectURL(p),o=document.createElement("a");o.setAttribute("href",v),o.setAttribute("download",`${g}.csv`),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o),At({action:"export_csv",details:{filename:g}})}async function pa(h,g="Compliance Report"){try{const l=await ea.create(),u=l.addPage([600,800]),{width:f,height:p}=u.getSize(),v=await l.embedFont(wt.HelveticaBold),o=await l.embedFont(wt.Helvetica);u.drawRectangle({x:0,y:p-100,width:f,height:100,color:ke(0,.22,.66)}),u.drawText("Smart E-VISION",{x:50,y:p-55,size:24,font:v,color:ke(1,1,1)}),u.drawText(g,{x:50,y:p-80,size:14,font:o,color:ke(1,1,1)});let d=p-140;u.drawText(`Generated on: ${new Date().toLocaleString("en-PH")}`,{x:50,y:d,size:10,font:o,color:ke(.3,.3,.3)}),d-=50,u.drawText("Executive Summary",{x:50,y:d,size:16,font:v,color:ke(0,0,0)}),d-=40;const i=(j,J)=>{u.drawText(j,{x:60,y:d,size:12,font:v}),u.drawText(String(J),{x:200,y:d,size:12,font:o}),d-=25};i("Total Submissions:",h.totalUploads),i("Compliance Rate:",`${h.compliantRate}%`),i("Late Submissions:",h.lateCount),i("Non-Compliant:",h.nonCompliantCount),i("Total Teachers:",h.totalTeachers||"N/A"),u.drawText("Verified and Authenticated by Smart E-VISION Digital Archiving System",{x:50,y:50,size:8,font:o,color:ke(.5,.5,.5)});const b=await l.save(),E=new Blob([b],{type:"application/pdf"}),I=URL.createObjectURL(E),$=document.createElement("a");$.href=I,$.download=`${g.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.pdf`,$.click(),At({action:"export_pdf",details:{title:g}})}catch(l){console.error("Failed to generate PDF:",l)}}function ma(h,g,l=[]){const u=[],f=[...g].sort((o,d)=>d.week_number-o.week_number);if(f.length===0)return[];const p=f.slice(0,5).map(o=>o.week_number),v=new Map;return h.forEach(o=>{const d=o.user_id;v.has(d)||v.set(d,[]),v.get(d).push(o)}),l.forEach(o=>{const d=v.get(o.id)||[];let i=0;const b=[];for(const E of p){const I=d.filter(j=>j.week_number===E);if(I.length===0||I.some(j=>{const J=ta(j.compliance_status);return J==="late"||J==="non-compliant"}))i++,b.push(E);else break}i>=3&&u.push({user_id:o.id,full_name:o.full_name,school_id:o.school_id,school_name:o.schools?.name||"Common School",pattern_type:"consecutive_late_missing",severity:i>=4?"high":"medium",details:`${o.full_name} has problematic submissions for ${i} consecutive weeks.`,weeks:[...b].reverse(),count:i})}),u.sort((o,d)=>{const i={high:3,medium:2,low:1};return i[d.severity]-i[o.severity]})}var ga=T('<div class="glass-card-static p-8 animate-pulse"><div class="h-4 bg-gray-200 rounded w-24 mb-4"></div> <div class="h-10 bg-gray-200 rounded w-16"></div></div>'),ba=T('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"></div>'),xa=T('<div class="text-center p-3 rounded-lg border border-border-subtle bg-surface-muted/30 transition-all hover:border-gov-blue/30 hover:bg-gov-blue/5"><p class="text-[10px] text-text-muted font-black uppercase tracking-tighter mb-1"> </p> <p> </p></div>'),ha=T('<div class="text-center py-8"><p class="text-text-muted mb-4 font-medium">No historical data available.</p> <a href="/dashboard/upload" class="inline-flex items-center px-4 py-2 rounded bg-gov-blue/10 text-gov-blue text-xs font-black uppercase tracking-widest hover:bg-gov-blue/20 transition-colors">UPLOAD</a></div>'),fa=T('<div class="flex items-center justify-center h-[200px] text-text-muted font-medium bg-surface-muted/30 rounded-lg border border-dashed border-border-strong"><p>Awaiting submission data for analysis</p></div>'),_a=T('<div class="p-12 text-center"><p class="text-text-muted font-bold uppercase tracking-widest text-xs mb-4">Archive Empty</p> <a href="/dashboard/upload" class="inline-flex items-center px-6 py-3 rounded bg-gov-blue text-white text-xs font-black uppercase tracking-widest hover:bg-gov-blue-dark transition-all shadow-md">SUBMIT FIRST RECORD</a></div>'),ya=T('<tr class="hover:bg-surface-muted/50 transition-colors"><td class="px-6 py-5 font-bold text-text-primary truncate max-w-[240px] sticky left-0 bg-white/5 z-0 leading-relaxed"> </td><td class="px-4 py-5 text-text-secondary font-medium"> </td><td class="px-4 py-5 text-center text-text-secondary text-xs font-semibold"> </td><td class="px-4 py-5 text-center"><!></td><td class="px-6 py-5 text-right text-text-muted text-[11px] font-bold uppercase tracking-tighter"> </td></tr>'),wa=T('<div class="p-4 space-y-3 active:bg-gray-50 transition-colors"><div class="flex justify-between items-start gap-3"><p class="font-bold text-text-primary line-clamp-2 leading-tight flex-1"> </p> <!></div> <div class="flex items-center justify-between text-[11px] text-text-muted"><div class="flex items-center gap-2"><span class="px-1.5 py-0.5 bg-gray-100 rounded text-text-secondary font-bold"> </span> <span> </span></div> <span class="font-medium"> </span></div></div>'),ka=T('<div class="hidden sm:block overflow-x-auto"><table class="w-full text-sm"><thead><tr class="border-b border-gray-100 bg-white/30"><th class="px-6 py-4 text-left text-xs font-bold text-text-muted uppercase tracking-wider sticky left-0 bg-white/30 backdrop-blur-md z-10"><button class="hover:text-text-primary flex items-center gap-1"> </button></th><th class="px-4 py-4 text-left text-xs font-bold text-text-muted uppercase tracking-wider">Type</th><th class="px-4 py-4 text-center text-xs font-bold text-text-muted uppercase tracking-wider">Load</th><th class="px-4 py-4 text-center text-xs font-bold text-text-muted uppercase tracking-wider"><button class="hover:text-text-primary flex items-center gap-1 mx-auto"> </button></th><th class="px-6 py-4 text-right text-xs font-bold text-text-muted uppercase tracking-wider"><button class="hover:text-text-primary flex items-center gap-1 ml-auto"> </button></th></tr></thead><tbody class="divide-y divide-gray-50/50"></tbody></table></div> <div class="sm:hidden divide-y divide-gray-100"></div>',1),Sa=T(`<div class="mb-10"><div class="flex items-center gap-3 mb-6"><div class="p-2 rounded-xl bg-gov-blue/10 text-gov-blue"><!></div> <h2 class="text-xl font-black text-text-primary tracking-tight">Quick Actions</h2></div> <div class="grid grid-cols-1 sm:grid-cols-3 gap-6"><a href="/dashboard/upload" class="gov-card p-6 flex flex-col gap-4 no-underline group"><div class="w-12 h-12 rounded-xl bg-gov-blue/5 text-gov-blue flex items-center justify-center group-hover:bg-gov-blue group-hover:text-white transition-all duration-300"><!></div> <div><p class="font-bold text-text-primary group-hover:text-gov-blue transition-colors">Upload Document</p> <p class="text-xs text-text-muted mt-1 leading-relaxed">Submit DLL, ISP, or ISR reports to the central
                            archive.</p></div></a> <a href="/dashboard/archive" class="gov-card p-6 flex flex-col gap-4 no-underline group"><div class="w-12 h-12 rounded-xl bg-gov-blue/5 text-gov-blue flex items-center justify-center group-hover:bg-gov-blue group-hover:text-white transition-all duration-300"><!></div> <div><p class="font-bold text-text-primary group-hover:text-gov-blue transition-colors">Access Archive</p> <p class="text-xs text-text-muted mt-1 leading-relaxed">Browse and retrieve your previously submitted
                            documents.</p></div></a> <a href="/dashboard/load" class="gov-card p-6 flex flex-col gap-4 no-underline group"><div class="w-12 h-12 rounded-xl bg-gov-blue/5 text-gov-blue flex items-center justify-center group-hover:bg-gov-blue group-hover:text-white transition-all duration-300"><!></div> <div><p class="font-bold text-text-primary group-hover:text-gov-blue transition-colors">Teaching Load</p> <p class="text-xs text-text-muted mt-1 leading-relaxed">Manage subjects, grade levels, and assigned
                            schedules.</p></div></a></div></div> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-10"><div><!></div> <div><!></div> <div><!></div> <div><!></div></div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-10"><div class="gov-card-static p-8"><h3 class="text-sm font-black text-text-primary uppercase tracking-widest mb-6 flex items-center gap-2"><span class="w-1.5 h-6 bg-gov-blue rounded-full"></span> Weekly Progress</h3> <div class="grid grid-cols-4 gap-3"></div> <!></div> <div class="gov-card-static p-8"><h3 class="text-sm font-black text-text-primary uppercase tracking-widest mb-6 flex items-center gap-2"><span class="w-1.5 h-6 bg-gov-green rounded-full"></span> Performance Trend</h3> <!></div></div> <div class="gov-card-static overflow-hidden mb-10"><div class="px-8 py-5 border-b border-border-subtle bg-surface-muted/30 flex items-center justify-between flex-wrap gap-4"><h3 class="text-sm font-black text-text-primary uppercase tracking-widest">Data Archive</h3> <select class="px-4 py-2 text-xs font-bold uppercase tracking-wider bg-white border border-border-strong rounded shadow-sm focus:ring-2 focus:ring-gov-blue/20 outline-none transition-all"><option>Display All Records</option><option>Filter: Compliant</option><option>Filter: Late</option><option>Filter: Non-compliant</option></select></div> <!></div>`,1),Ca=T('<div class="p-10 text-center"><p class="text-text-muted font-medium">No recent activity yet</p></div>'),Ta=T('<div class="flex items-center justify-between px-6 py-4 hover:bg-white/40 transition-colors"><div class="flex items-center gap-3 min-w-0"><span class="text-sm font-medium text-text-primary truncate"> </span></div> <div class="flex items-center gap-4 flex-shrink-0"><!> <span class="text-xs text-text-muted"> </span></div></div>'),Aa=T('<div class="divide-y divide-gray-100"></div>'),Da=T('<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6 mb-12"><div><!></div> <div><!></div> <div><!></div> <div><!></div> <div><!></div></div> <!> <div class="mb-10"><h2 class="text-sm font-black text-text-muted uppercase tracking-[0.2em] mb-6">Official Reports & Export</h2> <div class="gov-card p-8 flex flex-wrap items-center gap-6 bg-surface-muted/30"><button class="py-3 px-8 bg-white border border-border-strong rounded-md text-xs font-black uppercase tracking-widest text-text-primary hover:border-gov-blue hover:text-gov-blue transition-all flex items-center gap-2 shadow-sm cursor-pointer">CSV</button> <button class="py-3 px-8 bg-gov-blue border border-gov-blue rounded-md text-xs font-black uppercase tracking-widest text-white hover:bg-gov-blue-dark transition-all flex items-center gap-2 shadow-md cursor-pointer">PDF</button></div></div> <div><h2 class="text-xl font-bold text-text-primary mb-4">Recent Activity</h2> <div class="glass-card-static overflow-hidden"><!></div></div>',1),La=T('<div><div class="mb-10"><h1 class="text-3xl font-black text-text-primary tracking-tight"> </h1> <p class="text-base text-text-secondary mt-1">Welcome back, <span class="font-bold text-gov-blue"> </span></p></div> <!></div>');function Wa(h,g){kt(g,!0);const l=()=>Zt(Jt,"$profile",u),[u,f]=Gt();let p=U(we([])),v=U(we([])),o=U(we({Compliant:0,Late:0,NonCompliant:0,totalUploaded:0,expected:0,rate:0})),d=U(0),i=we({totalUploads:0,compliantRate:0,pendingQueue:0,totalTeachers:0,compliantCount:0,lateCount:0,nonCompliantCount:0}),b=U(we([])),E=U(we([])),I=U(!1),$=U(!0),j;function J(s){if(s.includes("/verify/")){const n=s.split("/verify/").pop();n&&(Yt(`/verify/${n}`),y(I,!1))}else alert(`Document Scanned: ${s}`)}let x=U("created_at"),L=U("desc"),w=U("all");St(async()=>{await ne(),V(),y($,!1)}),Ct(()=>{j&&B.removeChannel(j)});function V(){j=B.channel("dashboard-changes").on("postgres_changes",{event:"*",schema:"public",table:"submissions"},()=>{ne()}).subscribe()}async function ne(){const s=l();if(!s)return;const n=s.role;n==="Teacher"?await ze(s):await Ve(s,n)}async function ze(s){const[n,c,A]=await Promise.all([B.from("submissions").select("id, file_name, doc_type, compliance_status, created_at, week_number, teaching_loads(subject, grade_level)").eq("user_id",s.id).order("created_at",{ascending:!1}).limit(50),B.from("teaching_loads").select("*",{count:"exact",head:!0}).eq("user_id",s.id).eq("is_active",!0),B.from("academic_calendar").select("*").eq("school_year","2025-2026").order("week_number",{ascending:!0})]);y(p,n.data||[],!0),y(d,c.count||0,!0);const k=A.data||[];y(o,aa(t(p),t(d)),!0),y(v,ra(t(p),t(d),8,k),!0),y(b,(n.data||[]).slice(0,5),!0),i.totalUploads=(n.data||[]).length,i.compliantRate=t(o).rate}async function Ve(s,n){const{data:c}=await B.from("academic_calendar").select("*").eq("school_year","2025-2026").order("week_number",{ascending:!0}),A=c||[];let k=B.from("profiles").select("*, schools(name)").eq("role","Teacher"),N=B.from("submissions").select("*, uploader:profiles!inner(school_id, district_id)",{count:"exact"});n==="School Head"||n==="Master Teacher"?s.school_id&&(k=k.eq("school_id",s.school_id),N=N.eq("profiles.school_id",s.school_id)):n==="District Supervisor"&&s.district_id&&(k=k.eq("district_id",s.district_id),N=N.eq("profiles.district_id",s.district_id));const[ce,q]=await Promise.all([k,N.order("created_at",{ascending:!1})]),Y=ce.data||[],F=q.data||[];i.totalTeachers=Y.length,i.totalUploads=q.count||0,i.compliantCount=F.filter(O=>O.compliance_status==="compliant"||O.compliance_status==="on-time").length,i.lateCount=F.filter(O=>O.compliance_status==="late").length,i.nonCompliantCount=F.filter(O=>O.compliance_status==="non-compliant"||O.compliance_status==="missing").length,y(b,F.slice(0,5),!0),y(E,ma(F,A,Y),!0)}const de=G(()=>()=>{let s=[...t(p)];return t(w)!=="all"&&(s=s.filter(n=>{let c=n.compliance_status||"non-compliant";return c.toLowerCase()==="on-time"||c.toLowerCase()==="compliant"?c="compliant":c.toLowerCase()==="late"?c="late":(c.toLowerCase()==="missing"||c.toLowerCase()==="non-compliant")&&(c="non-compliant"),c===t(w)})),s.sort((n,c)=>{const A=n[t(x)]||"",k=c[t(x)]||"";return t(L)==="asc"?A>k?1:-1:A<k?1:-1}),s.slice(0,20)});function He(s){t(x)===s?y(L,t(L)==="asc"?"desc":"asc",!0):(y(x,s,!0),y(L,"desc"))}function Qe(s){return new Date(s).toLocaleDateString("en-PH",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function mt(s){const n=(s.compliance_status||"missing").toLowerCase();return n==="compliant"||n==="on-time"?"compliant":n==="late"?"late":"non-compliant"}var We=La();Vt("x1i5gj",s=>{Bt(()=>{Mt.title="Dashboard — Smart E-VISION"})});var Ge=a(We),Ze=a(Ge),Dt=a(Ze,!0);e(Ze);var gt=r(Ze,2),bt=r(a(gt)),Lt=a(bt,!0);e(bt),e(gt),e(Ge);var Rt=r(Ge,2);{var jt=s=>{var n=ba();Ie(n,20,()=>Array(4),Ne,(c,A)=>{var k=ga();C(c,k)}),e(n),C(s,n)},Ot=s=>{var n=Sa(),c=vt(n),A=a(c),k=a(A),N=a(k);sa(N,{size:20,fill:"currentColor"}),e(k),Me(2),e(A);var ce=r(A,2),q=a(ce),Y=a(q),F=a(Y);ia(F,{size:24}),e(Y),Me(2),e(q);var O=r(q,2),ve=a(O),Je=a(ve);la(Je,{size:24}),e(ve),Me(2),e(O);var Ce=r(O,2),Pe=a(Ce),ue=a(Pe);na(ue,{size:24}),e(Pe),Me(2),e(Ce),e(ce),e(c);var pe=r(c,2),ee=a(pe),Xe=a(ee);Z(Xe,{icon:"CloudUpload",get value(){return i.totalUploads},label:"Total Uploads"}),e(ee);var X=r(ee,2),$e=a(X);Z($e,{icon:"ShieldCheck",get value(){return`${t(o).rate??""}%`},label:"Compliance Rate",color:"from-gov-green to-gov-green-dark"}),e(X);var me=r(X,2),Ke=a(me);Z(Ke,{icon:"Clock",get value(){return t(o).Late},label:"Late Submissions",color:"from-gov-gold to-gov-gold-dark"}),e(me);var Te=r(me,2),z=a(Te);Z(z,{icon:"ShieldAlert",get value(){return t(o).NonCompliant},label:"Non-compliant",color:"from-gov-red to-red-700"}),e(Te),e(pe);var H=r(pe,2),ge=a(H),Q=r(a(ge),2);Ie(Q,21,()=>t(v),Ne,(m,R)=>{var W=xa(),M=a(W),De=a(M,!0);e(M);var fe=r(M,2),Le=a(fe);e(fe),e(W),ie(Re=>{_(De,t(R).label),Ht(fe,1,`text-xl font-black ${Re??""}`),_(Le,`${t(R).rate??""}%`)},[()=>oa(t(R).rate).replace("gov-","gov-")]),C(m,W)}),e(Q);var Ye=r(Q,2);{var be=m=>{var R=ha();C(m,R)};le(Ye,m=>{t(v).length===0&&m(be)})}e(ge);var te=r(ge,2),qe=r(a(te),2);{var et=m=>{{let R=G(()=>t(v).map(M=>M.label)),W=G(()=>[{label:"My Compliance",data:t(v).map(M=>M.rate),color:"#1b4294"}]);Xt(m,{get labels(){return t(R)},get datasets(){return t(W)},height:200})}},Be=m=>{var R=fa();C(m,R)};le(qe,m=>{t(v).length>0?m(et):m(Be,!1)})}e(te),e(H);var xe=r(H,2),he=a(xe),Ae=r(a(he),2),ae=a(Ae);ae.value=ae.__value="all";var tt=r(ae);tt.value=tt.__value="Compliant";var at=r(tt);at.value=at.__value="Late";var xt=r(at);xt.value=xt.__value="Non-Compliant",e(Ae),e(he);var Et=r(he,2);{var It=m=>{var R=_a();C(m,R)},Nt=G(()=>t(de)().length===0),Ft=m=>{var R=ka(),W=vt(R),M=a(W),De=a(M),fe=a(De),Le=a(fe),Re=a(Le),zt=a(Re);e(Re),e(Le);var rt=r(Le,3),ot=a(rt),Pt=a(ot);e(ot),e(rt);var ht=r(rt),st=a(ht),$t=a(st);e(st),e(ht),e(fe),e(De);var ft=r(De);Ie(ft,21,()=>t(de)(),Ne,(it,D)=>{const re=G(()=>Array.isArray(t(D).teaching_loads)?t(D).teaching_loads[0]:t(D).teaching_loads);var oe=ya(),K=a(oe),je=a(K,!0);e(K);var Oe=r(K),lt=a(Oe,!0);e(Oe);var _e=r(Oe),Ue=a(_e,!0);e(_e);var se=r(_e),nt=a(se);{let ye=G(()=>mt(t(D)));ut(nt,{get status(){return t(ye)},size:"sm"})}e(se);var Ee=r(se),dt=a(Ee,!0);e(Ee),e(oe),ie(ye=>{Wt(K,"title",t(D).file_name),_(je,t(D).file_name),_(lt,t(D).doc_type),_(Ue,t(re)?`${t(re).subject} - Gr. ${t(re).grade_level}`:"—"),_(dt,ye)},[()=>Qe(t(D).created_at)]),C(it,oe)}),e(ft),e(M),e(W);var _t=r(W,2);Ie(_t,21,()=>t(de)(),Ne,(it,D)=>{const re=G(()=>Array.isArray(t(D).teaching_loads)?t(D).teaching_loads[0]:t(D).teaching_loads);var oe=wa(),K=a(oe),je=a(K),Oe=a(je,!0);e(je);var lt=r(je,2);{let ct=G(()=>mt(t(D)));ut(lt,{get status(){return t(ct)},size:"sm"})}e(K);var _e=r(K,2),Ue=a(_e),se=a(Ue),nt=a(se,!0);e(se);var Ee=r(se,2),dt=a(Ee,!0);e(Ee),e(Ue);var ye=r(Ue,2),qt=a(ye,!0);e(ye),e(_e),e(oe),ie(ct=>{_(Oe,t(D).file_name),_(nt,t(D).doc_type),_(dt,t(re)?`${t(re).subject} • G${t(re).grade_level}`:"No Teaching Load"),_(qt,ct)},[()=>Qe(t(D).created_at)]),C(it,oe)}),e(_t),ie(()=>{_(zt,`Document ${t(x)==="file_name"?t(L)==="asc"?"↑":"↓":""}`),_(Pt,`Status ${t(x)==="compliance_status"?t(L)==="asc"?"↑":"↓":""}`),_($t,`Date ${t(x)==="created_at"?t(L)==="asc"?"↑":"↓":""}`)}),Se("click",Re,()=>He("file_name")),Se("click",ot,()=>He("compliance_status")),Se("click",st,()=>He("created_at")),C(m,R)};le(Et,m=>{t(Nt)?m(It):m(Ft,!1)})}e(xe),S(1,c,()=>Fe,()=>({duration:600,delay:0})),S(1,ee,()=>P,()=>({y:20,duration:400,delay:0})),S(1,X,()=>P,()=>({y:20,duration:400,delay:100})),S(1,me,()=>P,()=>({y:20,duration:400,delay:200})),S(1,Te,()=>P,()=>({y:20,duration:400,delay:300})),S(1,ge,()=>P,()=>({y:20,duration:500,delay:400})),S(1,te,()=>P,()=>({y:20,duration:500,delay:500})),Qt(Ae,()=>t(w),m=>y(w,m)),S(1,xe,()=>Fe,()=>({duration:500,delay:600})),C(s,n)},Ut=s=>{var n=Da(),c=vt(n),A=a(c),k=a(A);Z(k,{icon:"Users",get value(){return i.totalTeachers},label:"TOTAL TEACHERS"}),e(A);var N=r(A,2),ce=a(N);Z(ce,{icon:"FileText",get value(){return i.totalUploads},label:"TOTAL SUBMISSIONS",color:"gov-blue"}),e(N);var q=r(N,2),Y=a(q);Z(Y,{icon:"ShieldCheck",get value(){return i.compliantCount},label:"COMPLIANT",color:"gov-green"}),e(q);var F=r(q,2),O=a(F);Z(O,{icon:"Clock",get value(){return i.lateCount},label:"LATE",color:"gov-gold"}),e(F);var ve=r(F,2),Je=a(ve);Z(Je,{icon:"ShieldX",get value(){return i.nonCompliantCount},label:"NON-COMPLIANT",color:"gov-red"}),e(ve),e(c);var Ce=r(c,2);{var Pe=z=>{va(z,{onScan:J,onClose:()=>y(I,!1)})};le(Ce,z=>{t(I)&&z(Pe)})}var ue=r(Ce,2),pe=r(a(ue),2),ee=a(pe),Xe=r(ee,2);e(pe),e(ue);var X=r(ue,2),$e=r(a(X),2),me=a($e);{var Ke=z=>{var H=Ca();C(z,H)},Te=z=>{var H=Aa();Ie(H,21,()=>t(b),Ne,(ge,Q,Ye)=>{var be=Ta(),te=a(be),qe=a(te),et=a(qe,!0);e(qe),e(te);var Be=r(te,2),xe=a(Be);{let ae=G(()=>t(Q).compliance_status==="on-time"||t(Q).compliance_status==="compliant"?"compliant":t(Q).compliance_status==="late"?"late":"non-compliant");ut(xe,{get status(){return t(ae)},size:"sm"})}var he=r(xe,2),Ae=a(he,!0);e(he),e(Be),e(be),ie(ae=>{_(et,t(Q).file_name),_(Ae,ae)},[()=>Qe(t(Q).created_at)]),S(1,be,()=>P,()=>({x:-20,duration:400,delay:700+Ye*50})),C(ge,be)}),e(H),C(z,H)};le(me,z=>{t(b).length===0?z(Ke):z(Te,!1)})}e($e),e(X),S(1,A,()=>P,()=>({y:20,duration:400,delay:0})),S(1,N,()=>P,()=>({y:20,duration:400,delay:100})),S(1,q,()=>P,()=>({y:20,duration:400,delay:150})),S(1,F,()=>P,()=>({y:20,duration:400,delay:200})),S(1,ve,()=>P,()=>({y:20,duration:400,delay:300})),Se("click",ee,()=>ua(t(b),`Data_${new Date().toISOString().split("T")[0]}`)),Se("click",Xe,()=>pa(i,`${l()?.role} Summary`)),S(1,ue,()=>Fe,()=>({duration:600,delay:350})),S(1,X,()=>Fe,()=>({duration:600,delay:600})),C(s,n)};le(Rt,s=>{t($)?s(jt):l()?.role==="Teacher"?s(Ot,1):s(Ut,!1)})}e(We),ie(()=>{_(Dt,l()?.role==="Teacher"?"Overview":"Supervision Dashboard"),_(Lt,l()?.full_name||"User")}),C(h,We),Tt(),f()}pt(["click"]);export{Wa as component};
