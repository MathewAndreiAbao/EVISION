import{d as oe,a as n,f as v,s as _,b as R}from"../chunks/BGsM1btW.js";import{p as ie,d as k,f as U,o as le,a as ne,e as de,b as d,g as e,$ as ve,s as p,c as r,n as ce,r as s,h as O,t as $}from"../chunks/DEPQPQt8.js";import{i as M}from"../chunks/CVvYbTkW.js";import{e as F,i as T}from"../chunks/DFPLsyL_.js";import{t as P,f as V,a as ue}from"../chunks/tw1RdNRP.js";import{h as pe,s as q,a as S,r as me}from"../chunks/BFGHZJqN.js";import{b as fe}from"../chunks/CEtDmXYx.js";import{a as ge,s as xe}from"../chunks/DNJl1ib1.js";import{p as be}from"../chunks/CSn65FV0.js";var _e=v('<div class="h-32 glass-card-static animate-pulse"></div>'),ye=v('<div class="space-y-4"></div>'),he=v("<button><div></div></button> <span> </span>",1),we=v('<input type="text" class="bg-white border border-gray-200 rounded-lg px-3 py-2 text-sm font-bold w-24 focus:ring-2 focus:ring-gov-blue/20 outline-none"/> <button class="px-4 py-2 bg-gov-blue text-white rounded-lg text-xs font-bold hover:bg-gov-blue-dark active:scale-95 transition-all">Update</button>',1),ke=v('<div class="glass-card p-6 flex flex-col md:flex-row md:items-center justify-between gap-6"><div class="max-w-md"><h3 class="font-bold text-text-primary uppercase tracking-wider text-xs mb-1"> </h3> <p class="text-sm text-text-secondary leading-relaxed"> </p></div> <div class="flex items-center gap-3"><!></div></div>'),$e=v('<div><span class="w-6 h-6 rounded-full bg-white flex items-center justify-center text-[10px] shadow-sm"> </span> </div>'),Se=v('<div class="grid gap-6"></div> <!>',1),De=v(`<div class="max-w-4xl mx-auto"><div class="mb-8"><h1 class="text-2xl font-bold text-text-primary uppercase tracking-tight flex items-center gap-2">System Parameters</h1> <p class="text-text-secondary mt-1">Manage global system parameters and compliance thresholds.</p></div> <!> <div class="mt-12 p-8 border-2 border-dashed border-gray-100 rounded-3xl text-center"><p class="text-sm text-text-muted italic">Additional configuration modules (School Management, User Roles, API
            Keys) are currently handled via Supabase Dashboard.</p></div></div>`);function Ke(z,G){ie(G,!0);const j=()=>xe(be,"$profile",H),[H,J]=ge();let y=k(U([])),B=k(!0),D=k(!1),c=k(U({text:"",type:"success"}));le(async()=>{j()?.role!=="District Supervisor"&&j()?.role,await Q(),d(B,!1)});async function Q(){const{data:a}=await q.from("system_settings").select("*");d(y,a||[],!0),e(y).length===0&&d(y,[{key:"submission_window_days",value:"5",description:"Days after week end to allow on-time submissions"},{key:"maintenance_mode",value:"false",description:"Disable all uploads for system maintenance"},{key:"enforce_ocr",value:"true",description:"Prevent submission if OCR metadata mismatch"}],!0)}async function C(a,i){d(D,!0);const{error:u}=await q.from("system_settings").upsert({key:a,value:i,updated_at:new Date().toISOString()});u?d(c,{text:"Failed to save setting",type:"error"},!0):(d(c,{text:`Setting "${a}" updated successfully`,type:"success"},!0),setTimeout(()=>d(c,{text:"",type:"success"},!0),3e3)),d(D,!1)}var A=De();pe("wt9tlv",a=>{de(()=>{ve.title="Admin Config â€” Smart E-VISION"})});var W=p(r(A),2);{var X=a=>{var i=ye();F(i,20,()=>Array(3),T,(u,K)=>{var I=_e();n(u,I)}),s(i),n(a,i)},Y=a=>{var i=Se(),u=O(i);F(u,21,()=>e(y),T,(f,t,h)=>{var m=ke(),g=r(m),E=r(g),Z=r(E,!0);s(E);var L=p(E,2),ee=r(L,!0);s(L),s(g);var N=p(g,2),te=r(N);{var ae=l=>{var x=he(),o=O(x),w=r(o);s(o);var b=p(o,2),re=r(b,!0);s(b),$(()=>{S(o,1,`w-14 h-8 rounded-full transition-all relative ${e(t).value==="true"?"bg-gov-blue":"bg-gray-200"}`),S(w,1,`absolute top-1 w-6 h-6 rounded-full bg-white transition-all ${e(t).value==="true"?"left-7":"left-1"}`),S(b,1,`text-sm font-bold ${e(t).value==="true"?"text-gov-blue":"text-text-muted"}`),_(re,e(t).value==="true"?"ENABLED":"DISABLED")}),R("click",o,()=>{e(t).value=e(t).value==="true"?"false":"true",C(e(t).key,e(t).value)}),n(l,x)},se=l=>{var x=we(),o=O(x);me(o);var w=p(o,2);$(()=>w.disabled=e(D)),fe(o,()=>e(t).value,b=>e(t).value=b),R("click",w,()=>C(e(t).key,e(t).value)),n(l,x)};M(te,l=>{e(t).key==="maintenance_mode"||e(t).key==="enforce_ocr"?l(ae):l(se,!1)})}s(N),s(m),$(l=>{_(Z,l),_(ee,e(t).description||"System-wide parameter governing platform behavior.")},[()=>e(t).key.replace(/_/g," ")]),P(1,m,()=>V,()=>({y:20,duration:400})),n(f,m)}),s(u);var K=p(u,2);{var I=f=>{var t=$e(),h=r(t),m=r(h,!0);s(h);var g=p(h);s(t),$(()=>{S(t,1,`fixed bottom-24 right-8 px-6 py-4 rounded-2xl shadow-elevated border-l-4 ${e(c).type==="success"?"bg-green-50 border-green-500 text-green-800":"bg-red-50 border-red-500 text-red-800"} flex items-center gap-3 font-bold text-sm`),_(m,e(c).type==="success"?"OK":"!!"),_(g,` ${e(c).text??""}`)}),P(1,t,()=>V,()=>({x:50})),P(2,t,()=>ue),n(f,t)};M(K,f=>{e(c).text&&f(I)})}n(a,i)};M(W,a=>{e(B)?a(X):a(Y,!1)})}ce(2),s(A),n(z,A),ne(),J()}oe(["click"]);export{Ke as component};
