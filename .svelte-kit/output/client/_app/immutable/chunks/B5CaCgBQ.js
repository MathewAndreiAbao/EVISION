const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./mTzi4Dm6.js","./TDtrdbi3.js"])))=>i.map(i=>d[i]);
import{_ as u}from"./PPVm8Dsz.js";async function S(a){if(!a.type.startsWith("image/"))return console.warn("[ocr] Skipping Tesseract for non-image file type:",a.type),{docType:"Unknown",weekNumber:null,schoolYear:null,subject:null,gradeLevel:null,rawText:""};const{createWorker:e}=await u(async()=>{const{createWorker:t}=await import("./mTzi4Dm6.js").then(n=>n.i);return{createWorker:t}},__vite__mapDeps([0,1]),import.meta.url),r=await e("eng");try{const t=await A(a),{data:{text:n}}=await r.recognize(t);return E(n)}finally{await r.terminate()}}function A(a){return new Promise((e,r)=>{const t=new FileReader;t.onload=()=>e(t.result),t.onerror=r,t.readAsDataURL(a)})}function E(a){const e=a.toUpperCase();let r="Unknown";/DAILY\s*LESSON\s*LOG|D\.?L\.?L\.?/i.test(e)?r="DLL":/INSTRUCTIONAL\s*SUPERVISORY\s*PLAN|I\.?S\.?P\.?/i.test(e)?r="ISP":/INSTRUCTIONAL\s*SUPERVISORY\s*REPORT|I\.?S\.?R\.?/i.test(e)&&(r="ISR");let t=null;const n=[{name:"English",regex:/ENGLISH/i},{name:"Filipino",regex:/FILIPINO/i},{name:"Mathematics",regex:/MATHEMATICS|MATH/i},{name:"Science",regex:/SCIENCE/i},{name:"AP",regex:/ARALING\s*PANLIPUNAN|A\.?P\.?/i},{name:"EsP",regex:/EDUKASYON\s*SA\s*PAGPAPAKATAO|E\.?S\.?P\.?/i},{name:"MAPEH",regex:/MAPEH/i},{name:"EPP",regex:/E\.?P\.?P\.?/i},{name:"TLE",regex:/T\.?L\.?E\.?/i}];for(const c of n)if(c.regex.test(e)){t=c.name;break}const s=e.match(/GRADE\s*([1-9]|1[0-2])/)||e.match(/GR\.?\s*([1-9]|1[0-2])/),l=s?s[1]:null,o=e.match(/WEEK\s*#?\s*(\d+)/),m=o?parseInt(o[1],10):null,i=a.match(/S\.?Y\.?\s*(\d{4}\s*[-–]\s*\d{4})/i)||a.match(/(\d{4}\s*[-–]\s*\d{4})/),P=i?i[1].replace(/\s/g,""):null;return{docType:r,weekNumber:m,schoolYear:P,subject:t,gradeLevel:l,rawText:a}}export{S as extractMetadata,E as parseMetadata};
